<div class="admin-page">

  <p-toolbar>
    <div class="p-toolbar-group-left">
      <h2>Usuários</h2>
    </div>
    <div class="p-toolbar-group-right">
      <p-button
        label="Novo Usuário"
        icon="pi pi-plus"
        (click)="novoUsuario()" />
    </div>
  </p-toolbar>

  <div class="card-table">
    <p-table [value]="usuarios" [paginator]="true" [rows]="10" [showCurrentPageReport]="true"
             currentPageReportTemplate="Mostrando {first} a {last} de {totalRecords} usuários"
             [rowsPerPageOptions]="[10, 20, 50]">

      <ng-template pTemplate="header">
        <tr>
          <th pSortableColumn="nomeCompleto">Nome <p-sortIcon field="nomeCompleto"/></th>
          <th pSortableColumn="email">E-mail <p-sortIcon field="email"/></th>
          <th>Status</th>
          <th pSortableColumn="perfil">Perfil <p-sortIcon field="perfil"/></th>
          <th>Ações</th>
        </tr>
      </ng-template>

      <ng-template pTemplate="body" let-usuario>
        <tr [ngClass]="{'linha-inativa': usuario.status === 'INATIVO'}">
          <td>{{ usuario.nomeCompleto }}</td>
          <td>{{ usuario.email }}</td>
          <td>
             <span [class]="'status-badge status-' + usuario.status.toLowerCase()">
                {{ usuario.status }}
             </span>
          </td>
          <td>{{ usuario.perfil }}</td>
          <td>
            <p-button
              icon="pi pi-pencil"
              styleClass="p-button-sm p-button-info"
              [text]="true"
              (click)="editarUsuario(usuario.id)"
              pTooltip="Editar"/>

            <p-button
              [icon]="usuario.status === 'ATIVO' ? 'pi pi-ban' : 'pi pi-check-circle'"
              [styleClass]="usuario.status === 'ATIVO' ? 'p-button-sm p-button-danger' : 'p-button-sm p-button-success'"
              [text]="true"
              [pTooltip]="usuario.status === 'ATIVO' ? 'Desativar' : 'Ativar'"
              (click)="alternarStatus(usuario)" />
          </td>
        </tr>
      </ng-template>

      <ng-template pTemplate="emptymessage">
        <tr>
          <td colspan="5">Nenhum usuário encontrado.</td>
        </tr>
      </ng-template>

    </p-table>
  </div>
</div>
